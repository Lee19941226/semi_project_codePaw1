<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>입양후기 목록</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/css/review.css">


<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">

<link
	href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
	rel="stylesheet">

<style>
.like-icon {
	cursor: pointer;
	font-size: 23px; 
	vertical-align: middle;
	color: #e57373; 
}
.card{
	cursor: pointer;
}
.card-info h3{
	cursor: pointer;
}


</style>

</head>
<body>
	<th:block th:include="common/header"></th:block>
	<main class="content">
		<section class="section">
			<div class="page-title">입양사진 및 후기</div>
			<div class="searchTitle">
				<form action="/review/searchTitle" method="get">
					<input type="text" name="searchTitle" placeholder="검색"> <input
						type="hidden" name="reqPage" id="reqPage" value="1">
					<button type="submit">
						<span class="material-icons">search</span>
					</button>
				</form>
			</div>
			<hr class="border">
			<div class="all-review">
				<div class="all-card">
					<th:block th:each="review : ${list}">
						<div class="card-container">
							<div class="card" th:data-reviewNo="${review.reviewNo}">
								<img th:src="@{/image/sample.jpg}" alt="아이1">
							</div>
							<div class="card-info">
								<h3 class="review-title"
								th:data-reviewNo="${review.reviewNo}" 
								th:text="${review.reviewTitle}"></h3>
								<span class="material-icons-outlined like-icon">favorite_border</span>
							</div>
							<p class="date" th:text="${review.reviewDate}"></p>
						</div>
					</th:block>
					<div class="write-btn-wrapper">
						<a th:if="${session.member != null and (session.member.memberLevel == 1 or session.member.memberLevel == 2)}"
							href="/review/reviewWriteFrm">
							<button class="write-btn">글쓰기</button>
						</a>
					</div>
				</div>
			</div>
			<div id="pageNavi" th:utext="${pageNavi}"></div>
		</section>
	</main>
	<th:block th:include="common/footer"></th:block>

	<script>
	  document.addEventListener("DOMContentLoaded", function() {
	    const likeIcons = document.querySelectorAll(".like-icon");

	    likeIcons.forEach(icon => {
	      icon.addEventListener("click", function() {
	        if (this.textContent === "favorite_border") {
	          this.textContent = "favorite";   
	          this.classList.remove("material-icons-outlined");
	          this.classList.add("material-icons");
	        } else {
	          this.textContent = "favorite_border"; 
	          this.classList.remove("material-icons");
	          this.classList.add("material-icons-outlined");
	        }
	      });
	    });
		//이미지 클릭
	     document.querySelectorAll(".card").forEach(card =>{
	    	 card.addEventListener("click",function() {
	    		 const reviewNo = this.dataset.reviewno;
	    		 location.href= "/review/view?reviewNo=" + reviewNo;
	    	 })
	     });
	    	
	     // 제목 클릭
	     document.querySelectorAll(".review-title").forEach(title => {
	       title.addEventListener("click", function() {
	         const reviewNo = this.dataset.reviewno;
	         location.href = "/review/view?reviewNo=" + reviewNo;
	       });
	     });
	   });
	 </script>
</body>
</html>