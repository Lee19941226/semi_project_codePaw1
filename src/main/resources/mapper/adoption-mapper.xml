<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.iei.adoption.model.dao.AdoptionDao">
	<select id="selectAdoptionList" resultType="adoption">
		select * from
    		(select rownum as rnum, n.* from
      		  (select
         		   adoption_no, adoption_title, adoption_date, member_id
      		  from adoption order by adoption_no desc
       		 )n
  		  )
		where #{start} <![CDATA[ <= ]]>  rnum and rnum <![CDATA[ <= ]]> #{end}
	</select>
	
	<select id="selectAdoptionTotalCount" resultType="int">
		select count(*) from adoption
	</select>
	
	<select id="searchTitleCount" resultType="int">
  		select count(*) from adoption where adoption_title like '%'||'${searchTitle}'||'%'
    </select>
    
    <select id="searchTitleAdoption" resultType="adoption"> 	
		select * from
	    	(select rownum as rnum, n.* from
	        	(select 
	            	adoption_no, adoption_title, member_id, adoption_date 
	        	from adoption where adoption_title like '%'||${searchTitle}||'%' 
	        	order by adoption_no desc
	        	)n
	    	)
		where #{start} <![CDATA[ <= ]]> rnum and rnum <![CDATA[ <= ]]> #{end}
    </select>
	
	<insert id="insertAdoption">
		insert into adoption values(adoption_seq.nextval,#{adoptionContent},to_char(sysdate,'yyyy-mm-dd'),#{adoptionTitle},#{memberId},#{protectNo},1)
	</insert>
	
	<select id="selectOneAdoption">
		select * from adoption where adoption_no = #{AdoptionNo}
	</select>
	
	<update id="updateAdoption">
		update adoption set
			adoption_title=#{adoptionTitle},
			adoption_content=#{adoptionContent}
		where
			adoption_no=#{adoptionNo}
	</update>
	
	<delete id="deleteAdoptionNo">
		delete from adoption where adoption_no = ${adoptionNo}
	</delete>
</mapper>
